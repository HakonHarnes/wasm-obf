<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Emscripten Module</title>
    <script src="https://biowasm.com/cdn/v3/aioli.js"></script>
  </head>
  <body>
    {{{ SCRIPT }}}
    <script type="module">
      (async function () {
        const CLI = await new Aioli([
          {
            tool: "smith_waterman",
            urlPrefix: document.location.href.replace(/\/[^/]*\.html$/, ""),
          },
        ]);

        async function sleep(ms) {
          return new Promise((resolve) => setTimeout(resolve, ms));
        }

        while (true) {
          // Align two sequences with the Smith-Waterman algorithm
          const output = await CLI.exec("smith_waterman ACGT ACCCCGT");
          document.getElementById("output").innerHTML = output;
          await sleep(250);
          document.getElementById("output").innerHTML = "Loading...";
          await sleep(250);
        }
      })();
    </script>

    <h4>Output of <code>smith_waterman</code>:</h4>
    <pre id="output">Loading...</pre>
  </body>
</html>
